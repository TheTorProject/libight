commonflags = -Wall -Wextra -fPIC
cppflags = -I. -Iinclude @CPPFLAGS@
cflags = $commonflags -std=c11 @CFLAGS@
cxxflags = $commonflags -std=c++14 @CXXFLAGS@

rule cc
  depfile = $out.d
  deps = gcc
  command = @CC@ -MMD -MF $out.d $cppflags $cflags -c $in -o $out

rule cxx
  depfile = $out.d
  deps = gcc
  command = @CXX@ -MMD -MF $out.d $cppflags $cxxflags -c $in -o $out

rule ar
  command = @AR@ cru $out $in

rule link
  command = @CXX@ @LDFLAGS@ -o $out $in @LIBS@
