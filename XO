diff --git a/src/libmeasurement_kit/ooni/templates.cpp b/src/libmeasurement_kit/ooni/templates.cpp
index 7e34107..ff6c480 100644
--- a/src/libmeasurement_kit/ooni/templates.cpp
+++ b/src/libmeasurement_kit/ooni/templates.cpp
@@ -2,12 +2,9 @@
 // Measurement-kit is free software. See AUTHORS and LICENSE for more
 // information on the copying conditions.
 
-#include <event2/dns.h>
-#include <measurement_kit/dns.hpp>
-#include <measurement_kit/http.hpp>
 #include <measurement_kit/ooni.hpp>
-#include <measurement_kit/report.hpp>
-#include <sstream>
+
+#include <event2/dns.h>
 
 namespace mk {
 namespace ooni {
@@ -41,13 +38,13 @@ void dns_query(Var<Entry> entry, dns::QueryType query_type,
                    query_entry["resolver_port"] = resolver_port;
                    query_entry["failure"] = nullptr;
                    query_entry["answers"] = Entry::array();
-                   if (query_type == dns::QueryTypeId::A) {
+                   if (query_type == "A") {
                        query_entry["query_type"] = "A";
                        query_entry["hostname"] = query_name;
                    }
                    if (!error) {
                        for (auto answer : message.answers) {
-                           if (query_type == dns::QueryTypeId::A) {
+                           if (query_type == "A") {
                                query_entry["answers"].push_back(
                                    {{"ttl", answer.ttl},
                                     {"ipv4", answer.ipv4},
